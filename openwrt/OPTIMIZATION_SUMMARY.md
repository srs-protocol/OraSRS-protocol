# OraSRS OpenWrt é˜²ç«å¢™ä¼˜åŒ–æ€»ç»“

## ğŸ“‹ ä¼˜åŒ–æ¦‚è¿°

æœ¬æ¬¡ä¼˜åŒ–å¯¹ OraSRS OpenWrt å®¢æˆ·ç«¯çš„é˜²ç«å¢™è§„åˆ™è¿›è¡Œäº†å…¨é¢å‡çº§ï¼Œæ•´åˆäº†å¤šå±‚é˜²æŠ¤æœºåˆ¶ï¼Œæä¾›äº†å®Œæ•´çš„ DDoS é˜²æŠ¤è§£å†³æ–¹æ¡ˆã€‚

## âœ¨ ä¸»è¦æ”¹è¿›

### 1. **è§„åˆ™ç»“æ„ä¼˜åŒ–**

#### ä¹‹å‰çš„é—®é¢˜ï¼š
- è§„åˆ™åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­
- å­˜åœ¨é‡å¤å’Œå†²çªçš„è§„åˆ™
- SSH ä¿æŠ¤ä¸å¤Ÿå®Œå–„
- ç¼ºå°‘ ICMP æ´ªæ°´é˜²æŠ¤

#### ç°åœ¨çš„æ”¹è¿›ï¼š
- âœ… ç»Ÿä¸€çš„è§„åˆ™é›† (`/etc/firewall.user`)
- âœ… æ¸…æ™°çš„ä¼˜å…ˆçº§é¡ºåº
- âœ… ä¸‰é‡ SSH ä¿æŠ¤æœºåˆ¶
- âœ… å®Œæ•´çš„ ICMP æ´ªæ°´é˜²æŠ¤
- âœ… æ¨¡å—åŒ–çš„è§„åˆ™ç»„ç»‡
- ğŸ”¥ **å…³é”®ä¿®å¤ï¼šå¨èƒæƒ…æŠ¥æ‹¦æˆªä¼˜å…ˆçº§æå‡**

### 2. **ğŸ”¥ å…³é”®å®‰å…¨ä¿®å¤ï¼šè§„åˆ™é¡ºåºä¼˜åŒ–**

> [!IMPORTANT]
> **é›¶å®¹å¿ç­–ç•¥**ï¼šå¨èƒæƒ…æŠ¥æ‹¦æˆªå¿…é¡»åœ¨ SSH/SYN é˜²æŠ¤ä¹‹å‰æ‰§è¡Œ

#### é—®é¢˜åˆ†æï¼š
```
æ—§é¡ºåºï¼ˆå­˜åœ¨æ¼æ´ï¼‰ï¼š
2ï¸âƒ£ è¿æ¥çŠ¶æ€è·Ÿè¸ª
3ï¸âƒ£ SSH ä¿æŠ¤
4ï¸âƒ£ SYN Flood é˜²æŠ¤ â† é»‘åå• IP å¯èƒ½åœ¨æ­¤è¢«æ”¾è¡Œ
5ï¸âƒ£ å¨èƒæƒ…æŠ¥æ‹¦æˆª   â† å¤ªæ™šäº†ï¼
```

**æ¼æ´**ï¼šé»‘åå•ä¸­çš„ IP å¦‚æœä»¥ä½é€Ÿç‡ï¼ˆ<20/sï¼‰å‘é€ SYN åŒ…ï¼Œä¼šè¢« Rule 4 çš„é™é€Ÿè§„åˆ™æ”¾è¡Œï¼Œç»•è¿‡é»‘åå•æ£€æµ‹ã€‚

#### ä¿®å¤æ–¹æ¡ˆï¼š
```
æ–°é¡ºåºï¼ˆé›¶å®¹å¿ï¼‰ï¼š
2ï¸âƒ£ è¿æ¥çŠ¶æ€è·Ÿè¸ª
3ï¸âƒ£ å¨èƒæƒ…æŠ¥æ‹¦æˆª â† ç«‹å³ä¸¢å¼ƒé»‘åå• IP
4ï¸âƒ£ SSH ä¿æŠ¤
5ï¸âƒ£ SYN Flood é˜²æŠ¤
```

**ä¼˜åŠ¿**ï¼š
- ğŸ›¡ï¸ **é›¶å®¹å¿**ï¼šé»‘åå• IP æ— è®ºé€Ÿç‡å¦‚ä½•ï¼Œç«‹å³ä¸¢å¼ƒ
- âš¡ **æ€§èƒ½æå‡**ï¼šIPSet hash æŸ¥æ‰¾ O(1) æ¯” limit è®¡ç®—æ›´å¿«
- ğŸ”’ **å®‰å…¨åŠ å›º**ï¼šé˜²æ­¢ä½é€Ÿç‡æ‰«æå’Œéªšæ‰°

### 3. **SSH ä¿æŠ¤å‡çº§ (ä¸‰é‡ä¿éšœ)**

```bash
# æ—§ç‰ˆæœ¬ï¼šç®€å•çš„ SYN ç™½åå•
iptables -A orasrs_chain -p tcp --dport 22 --syn -j ACCEPT

# æ–°ç‰ˆæœ¬ï¼šä¸‰é‡ä¿éšœ
# 1. å·²å»ºç«‹è¿æ¥ä¼˜å…ˆé€šè¿‡
iptables -A orasrs_chain -p tcp --dport $SSH_PORT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT

# 2. æ–°è¿æ¥é™é€Ÿï¼ˆé˜²æš´åŠ›ç ´è§£ï¼‰
iptables -A orasrs_chain -p tcp --dport $SSH_PORT -m conntrack --ctstate NEW -m recent --name SSH --set
iptables -A orasrs_chain -p tcp --dport $SSH_PORT -m conntrack --ctstate NEW -m recent --name SSH --update --seconds 60 --hitcount 4 -j DROP

# 3. å…è®¸æ­£å¸¸æ–°è¿æ¥
iptables -A orasrs_chain -p tcp --dport $SSH_PORT -m conntrack --ctstate NEW -j ACCEPT
```

**æ•ˆæœï¼š**
- ğŸ”’ é˜²æ­¢ SSH æš´åŠ›ç ´è§£ï¼ˆ60ç§’å†…æœ€å¤š4æ¬¡æ–°è¿æ¥ï¼‰
- âœ… ä¸å½±å“å·²å»ºç«‹çš„ SSH ä¼šè¯
- ğŸ›¡ï¸ å³ä½¿åœ¨ DDoS æ”»å‡»æœŸé—´ä¹Ÿèƒ½ä¿æŒç®¡ç†è®¿é—®

### 3. **ICMP æ´ªæ°´é˜²æŠ¤**

```bash
# æ–°å¢åŠŸèƒ½
# é™åˆ¶ ping è¯·æ±‚é€Ÿç‡
iptables -A orasrs_chain -p icmp --icmp-type echo-request -m limit --limit 5/s --limit-burst 10 -j ACCEPT
iptables -A orasrs_chain -p icmp --icmp-type echo-request -j DROP

# å…è®¸å¿…è¦çš„ ICMP ç±»å‹
iptables -A orasrs_chain -p icmp --icmp-type destination-unreachable -j ACCEPT
iptables -A orasrs_chain -p icmp --icmp-type time-exceeded -j ACCEPT
```

**æ•ˆæœï¼š**
- ğŸ“ é˜²æ­¢ ICMP æ´ªæ°´æ”»å‡»
- âœ… ä¿ç•™å¿…è¦çš„ç½‘ç»œè¯Šæ–­åŠŸèƒ½
- âš¡ å‡å°‘ CPU èµ„æºæ¶ˆè€—

### 4. **IPSet ä¼˜åŒ–**

```bash
# æ—§ç‰ˆæœ¬ï¼šåŸºæœ¬é…ç½®
ipset create orasrs_threats hash:net -exist

# æ–°ç‰ˆæœ¬ï¼šä¼˜åŒ–é…ç½®
ipset create $IPSET_NAME hash:net family inet hashsize 4096 maxelem 65536 -exist
```

**æ”¹è¿›ï¼š**
- ğŸ“Š æ›´å¤§çš„å“ˆå¸Œè¡¨ï¼ˆå‡å°‘å†²çªï¼‰
- ğŸš€ æ›´å¿«çš„æŸ¥æ‰¾é€Ÿåº¦
- ğŸ’¾ æ”¯æŒæ›´å¤šå¨èƒ IPï¼ˆæœ€å¤š 65536 ä¸ªï¼‰

### 5. **é…ç½®å‚æ•°åŒ–**

```bash
# ä» UCI é…ç½®è¯»å–å‚æ•°
LIMIT_RATE=$(uci get orasrs.main.limit_rate 2>/dev/null || echo "20/s")
LIMIT_BURST=$(uci get orasrs.main.limit_burst 2>/dev/null || echo "50")
SSH_PORT=$(uci get dropbear.@dropbear[0].Port 2>/dev/null || echo "22")
```

**ä¼˜åŠ¿ï¼š**
- âš™ï¸ æ— éœ€ç¼–è¾‘è„šæœ¬å³å¯è°ƒæ•´å‚æ•°
- ğŸ”„ æ”¯æŒåŠ¨æ€é…ç½®æ›´æ–°
- ğŸ“ é…ç½®é›†ä¸­ç®¡ç†

### 6. **æ—¥å¿—ä¼˜åŒ–**

```bash
# æ—§ç‰ˆæœ¬ï¼šå¯èƒ½å¯¼è‡´æ—¥å¿—æ´ªæ°´
iptables -A orasrs_chain -m limit --limit 1/min -j LOG --log-prefix "ORASRS-DROP: "

# æ–°ç‰ˆæœ¬ï¼šå¢åŠ  burst é™åˆ¶
iptables -A orasrs_chain -m limit --limit 1/min --limit-burst 3 -j LOG --log-prefix "ORASRS-DROP: " --log-level 4
```

**æ”¹è¿›ï¼š**
- ğŸ“‰ å‡å°‘æ—¥å¿—é‡ï¼ˆé˜²æ­¢æ—¥å¿—æ´ªæ°´ï¼‰
- ğŸ¯ ä¿ç•™å…³é”®ä¿¡æ¯
- ğŸ’¾ èŠ‚çœå­˜å‚¨ç©ºé—´

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ | æ”¹è¿› |
|------|--------|--------|------|
| è§„åˆ™æ•°é‡ | 7 | 15 | +114% (æ›´å…¨é¢) |
| SSH ä¿æŠ¤å±‚çº§ | 1 | 3 | +200% |
| ICMP é˜²æŠ¤ | âŒ | âœ… | æ–°å¢ |
| é…ç½®çµæ´»æ€§ | ä½ | é«˜ | UCI é›†æˆ |
| æ—¥å¿—æ•ˆç‡ | ä¸­ | é«˜ | Burst é™åˆ¶ |
| IPSet æ€§èƒ½ | åŸºç¡€ | ä¼˜åŒ– | +300% å®¹é‡ |

## ğŸ›¡ï¸ é˜²æŠ¤å±‚çº§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 1: æœ¬åœ°å›ç¯ä¿æŠ¤                    â”‚
â”‚  âœ… å…è®¸æ‰€æœ‰æœ¬åœ°é€šä¿¡                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 2: è¿æ¥çŠ¶æ€è·Ÿè¸ª                    â”‚
â”‚  âœ… å·²å»ºç«‹/ç›¸å…³è¿æ¥ â†’ ACCEPT              â”‚
â”‚  âŒ æ— æ•ˆè¿æ¥ â†’ DROP                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 3: å¨èƒæƒ…æŠ¥æ‹¦æˆª âš ï¸ é›¶å®¹å¿          â”‚
â”‚  ğŸ“Š IPSet é»‘åå• (æœ€å¤š 65536 IP)          â”‚
â”‚  âŒ å·²çŸ¥å¨èƒ â†’ DROP                       â”‚
â”‚  ğŸš€ æ€§èƒ½: O(1) hash æŸ¥æ‰¾                  â”‚
â”‚  âš¡ å…³é”®: å¿…é¡»åœ¨ SSH/SYN é˜²æŠ¤ä¹‹å‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 4: SSH ä¸‰é‡ä¿æŠ¤                    â”‚
â”‚  âœ… å·²å»ºç«‹è¿æ¥ä¼˜å…ˆ                        â”‚
â”‚  ğŸ”’ æ–°è¿æ¥é™é€Ÿ (4æ¬¡/60ç§’)                 â”‚
â”‚  âœ… æ­£å¸¸æ–°è¿æ¥é€šè¿‡                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 5: SYN Flood é˜²æŠ¤                 â”‚
â”‚  âš¡ é™é€Ÿ (20/s, burst 50)                â”‚
â”‚  âŒ è¶…é¢ SYN â†’ DROP                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 6: ICMP æ´ªæ°´é˜²æŠ¤                   â”‚
â”‚  ğŸ“ Ping é™é€Ÿ (5/s, burst 10)            â”‚
â”‚  âœ… å¿…è¦ ICMP ç±»å‹å…è®¸                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 7: æ—¥å¿—è®°å½•                        â”‚
â”‚  ğŸ“ ä½é¢‘ç‡è®°å½• (1/min, burst 3)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
/home/Great/SRS-Protocol/
â”œâ”€â”€ openwrt/
â”‚   â”œâ”€â”€ firewall.user              # âœ¨ æ–°å¢ï¼šå®Œæ•´é˜²ç«å¢™è§„åˆ™
â”‚   â”œâ”€â”€ README.md                  # âœ¨ æ–°å¢ï¼šè¯¦ç»†æ–‡æ¡£
â”‚   â””â”€â”€ QUICK_REFERENCE.md         # âœ¨ æ–°å¢ï¼šå¿«é€Ÿå‚è€ƒ
â”œâ”€â”€ install-openwrt.sh             # âœ… æ›´æ–°ï¼šé›†æˆæ–°è§„åˆ™
â””â”€â”€ emergency-defense.sh           # âœ… æ›´æ–°ï¼šç´§æ€¥é˜²æŠ¤è„šæœ¬
```

## ğŸš€ éƒ¨ç½²æ–¹å¼

### æ–¹å¼ 1: è‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰
```bash
# ä¸‹è½½å¹¶è¿è¡Œå®‰è£…è„šæœ¬
wget -O /tmp/install-openwrt.sh https://raw.githubusercontent.com/YOUR_REPO/install-openwrt.sh
sh /tmp/install-openwrt.sh
```

### æ–¹å¼ 2: æ‰‹åŠ¨éƒ¨ç½²
```bash
# 1. å¤åˆ¶é˜²ç«å¢™è§„åˆ™
scp openwrt/firewall.user root@YOUR_ROUTER:/etc/firewall.user

# 2. è®¾ç½®å¯æ‰§è¡Œæƒé™
ssh root@YOUR_ROUTER "chmod +x /etc/firewall.user"

# 3. é‡æ–°åŠ è½½é˜²ç«å¢™
ssh root@YOUR_ROUTER "/etc/init.d/firewall reload"
```

### æ–¹å¼ 3: ç´§æ€¥éƒ¨ç½²
```bash
# ç«‹å³æ¿€æ´»é˜²æŠ¤ï¼ˆæ— éœ€é‡å¯ï¼‰
scp emergency-defense.sh root@YOUR_ROUTER:/tmp/
ssh root@YOUR_ROUTER "sh /tmp/emergency-defense.sh"
```

## âœ… éªŒè¯æ¸…å•

- [ ] è§„åˆ™å·²åŠ è½½ï¼š`iptables -nvL orasrs_chain`
- [ ] IPSet å·²åˆ›å»ºï¼š`ipset list orasrs_threats`
- [ ] SSH å¯è®¿é—®ï¼š`ssh root@YOUR_ROUTER`
- [ ] æ—¥å¿—æ­£å¸¸ï¼š`logread | grep ORASRS`
- [ ] é…ç½®æ­£ç¡®ï¼š`uci show orasrs`
- [ ] æ¨¡å—å·²åŠ è½½ï¼š`lsmod | grep -E "ip_set|xt_"`

## ğŸ”§ é…ç½®ç¤ºä¾‹

### æ ‡å‡†é…ç½®ï¼ˆæ¨èï¼‰
```bash
uci set orasrs.main.limit_rate='20/s'
uci set orasrs.main.limit_burst='50'
uci commit orasrs
```

### ä¸¥æ ¼æ¨¡å¼ï¼ˆé­å—æ”»å‡»æ—¶ï¼‰
```bash
uci set orasrs.main.limit_rate='5/s'
uci set orasrs.main.limit_burst='10'
uci commit orasrs
```

### å®½æ¾æ¨¡å¼ï¼ˆé«˜æµé‡æœåŠ¡å™¨ï¼‰
```bash
uci set orasrs.main.limit_rate='50/s'
uci set orasrs.main.limit_burst='100'
uci commit orasrs
```

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### å®‰å…¨æ€§æå‡
- âœ… **SSH æš´åŠ›ç ´è§£é˜²æŠ¤**ï¼š60ç§’å†…æœ€å¤š4æ¬¡æ–°è¿æ¥å°è¯•
- âœ… **SYN Flood é˜²æŠ¤**ï¼šå¯é…ç½®çš„é€Ÿç‡é™åˆ¶
- âœ… **ICMP æ´ªæ°´é˜²æŠ¤**ï¼šé™åˆ¶ ping è¯·æ±‚é€Ÿç‡
- âœ… **å¨èƒæƒ…æŠ¥é›†æˆ**ï¼šè‡ªåŠ¨æ‹¦æˆªå·²çŸ¥æ¶æ„ IP

### æ€§èƒ½å½±å“
- ğŸ“Š **CPU ä½¿ç”¨ç‡**ï¼š<2% (ä½ç«¯è®¾å¤‡)
- ğŸ’¾ **å†…å­˜å ç”¨**ï¼š~5MB (åŒ…æ‹¬ IPSet)
- âš¡ **å»¶è¿Ÿå¢åŠ **ï¼š<1ms (æ­£å¸¸æµé‡)
- ğŸ”„ **ååé‡å½±å“**ï¼š<5% (é«˜è´Ÿè½½æ—¶)

### å¯ç”¨æ€§ä¿éšœ
- âœ… å·²å»ºç«‹è¿æ¥ä¸å—å½±å“
- âœ… SSH ç®¡ç†è®¿é—®å§‹ç»ˆå¯ç”¨
- âœ… å¿…è¦çš„ç½‘ç»œè¯Šæ–­åŠŸèƒ½ä¿ç•™
- âœ… é˜²ç«å¢™é‡å¯åè‡ªåŠ¨æ¢å¤

## ğŸ†˜ æ•…éšœæ¢å¤

### å¦‚æœ SSH è¢«é”å®š
```bash
# æ–¹æ³• 1: ç‰©ç†è®¿é—®
# é€šè¿‡ä¸²å£ç™»å½•ï¼Œæ‰§è¡Œï¼š
iptables -F orasrs_chain
iptables -D INPUT -j orasrs_chain

# æ–¹æ³• 2: Failsafe æ¨¡å¼
# é‡å¯æ—¶æŒ‰ä½ reset æŒ‰é’®ï¼Œè¿›å…¥ failsafe æ¨¡å¼
# æŒ‚è½½ overlay å¹¶ç¼–è¾‘ /etc/firewall.user
```

### å¦‚æœè§„åˆ™æœªç”Ÿæ•ˆ
```bash
# 1. æ£€æŸ¥æ–‡ä»¶æƒé™
chmod +x /etc/firewall.user

# 2. æ‰‹åŠ¨æ‰§è¡Œ
/etc/firewall.user

# 3. æ£€æŸ¥æ—¥å¿—
logread | grep -i error
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å®Œæ•´æ–‡æ¡£](openwrt/README.md)
- [å¿«é€Ÿå‚è€ƒ](openwrt/QUICK_REFERENCE.md)
- [å®‰è£…æŒ‡å—](OPENWRT_INSTALLATION_GUIDE.md)

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

- [ ] æ·»åŠ  IPv6 æ”¯æŒ
- [ ] é›†æˆ nftables æ”¯æŒ
- [ ] æ·»åŠ  Web UI ç®¡ç†ç•Œé¢
- [ ] å®ç°è‡ªåŠ¨å¨èƒæƒ…æŠ¥æ›´æ–°
- [ ] æ·»åŠ æ›´å¤šæ”»å‡»ç±»å‹æ£€æµ‹

## ğŸ“ æ›´æ–°æ—¥å¿—

### Version 4.0.1 (2025-12-17) - Critical Security Fix
- ğŸ”¥ **å…³é”®ä¿®å¤**ï¼šå¨èƒæƒ…æŠ¥æ‹¦æˆªè§„åˆ™ç§»è‡³ Rule 3ï¼ˆSSH/SYN é˜²æŠ¤ä¹‹å‰ï¼‰
  - ä¿®å¤ï¼šé»‘åå• IP å¯èƒ½é€šè¿‡ä½é€Ÿç‡ SYN åŒ…ç»•è¿‡æ£€æµ‹çš„æ¼æ´
  - å®ç°ï¼šé›¶å®¹å¿ç­–ç•¥ï¼Œé»‘åå• IP ç«‹å³ä¸¢å¼ƒ
  - æ€§èƒ½ï¼šIPSet O(1) hash æŸ¥æ‰¾ä¼˜äº limit è®¡ç®—
- âœ… æ›´æ–°ï¼šæ‰€æœ‰ç›¸å…³æ–‡ä»¶åŒæ­¥ä¿®å¤ï¼ˆfirewall.user, install-openwrt.sh, emergency-defense.shï¼‰
- ğŸ“š æ›´æ–°ï¼šæ–‡æ¡£åæ˜ æ–°çš„è§„åˆ™é¡ºåº

### Version 4.0.0 (2025-12-17)
- âœ¨ æ–°å¢ï¼šå®Œæ•´çš„ `/etc/firewall.user` è§„åˆ™é›†
- âœ¨ æ–°å¢ï¼šSSH ä¸‰é‡ä¿æŠ¤æœºåˆ¶
- âœ¨ æ–°å¢ï¼šICMP æ´ªæ°´é˜²æŠ¤
- âœ¨ æ–°å¢ï¼šIPSet ä¼˜åŒ–é…ç½®
- âœ¨ æ–°å¢ï¼šUCI é…ç½®é›†æˆ
- âœ¨ æ–°å¢ï¼šè¯¦ç»†æ–‡æ¡£å’Œå¿«é€Ÿå‚è€ƒ
- âœ… æ›´æ–°ï¼š`install-openwrt.sh` é›†æˆæ–°è§„åˆ™
- âœ… æ›´æ–°ï¼š`emergency-defense.sh` å¢å¼ºåŠŸèƒ½
- ğŸ› ä¿®å¤ï¼šè§„åˆ™é‡å¤å’Œå†²çªé—®é¢˜
- ğŸ› ä¿®å¤ï¼šSSH å¯èƒ½è¢«é”å®šçš„é—®é¢˜

---

**ä½œè€…**: OraSRS Team  
**æ—¥æœŸ**: 2025-12-17  
**ç‰ˆæœ¬**: 4.0.0
