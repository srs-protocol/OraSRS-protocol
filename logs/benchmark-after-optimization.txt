
[0;34m========================================[0m
[0;34mOraSRS 内核加速性能基准测试[0m
[0;34m========================================[0m

[0;34mℹ️  检查服务状态...[0m
[0;32m✅ 服务运行正常[0m

[0;34m========================================[0m
[0;34m系统信息[0m
[0;34m========================================[0m

[0;36m操作系统:[0m Linux
[0;36m内核版本:[0m 5.14.0-570.28.1.el9_6.x86_64
[0;36mCPU 核心:[0m 4
[0;36m内存:[0m 4.1Gi
[0;36meBPF 状态:[0m [0;32m启用[0m (模式: monitor)

[0;34m========================================[0m
[0;34m1. API 延迟测试[0m
[0;34m========================================[0m

[0;34mℹ️  预热中 (100 请求)...[0m
[0;34mℹ️  测试 基本状态端点...[0m
[0;36m  平均延迟:[0m [0;32m20[0m ms
  [1;33m(目标: < 50ms)[0m
[0;36m  最小延迟:[0m [0;32m15[0m ms
[0;36m  最大延迟:[0m [0;32m51[0m ms
[0;32m✅   延迟测试通过[0m

[0;34mℹ️  测试 详细统计端点...[0m
[0;36m  平均延迟:[0m [0;32m20[0m ms
  [1;33m(目标: < 50ms)[0m
[0;36m  最小延迟:[0m [0;32m16[0m ms
[0;36m  最大延迟:[0m [0;32m41[0m ms
[0;32m✅   延迟测试通过[0m

[0;34mℹ️  测试 威胁查询端点...[0m
[0;36m  平均延迟:[0m [0;32m19[0m ms
  [1;33m(目标: < 50ms)[0m
[0;36m  最小延迟:[0m [0;32m15[0m ms
[0;36m  最大延迟:[0m [0;32m32[0m ms
[0;32m✅   延迟测试通过[0m


[0;34m========================================[0m
[0;34m2. 吞吐量测试[0m
[0;34m========================================[0m

[0;34mℹ️  使用 Apache Bench 进行吞吐量测试...[0m
[0;34mℹ️  并发数: 1[0m
[0;36m  吞吐量:[0m [0;32m300.41[0m req/s
[0;36m  平均响应时间:[0m [0;32m3.329[0m ms
[0;31m❌   吞吐量测试失败 (< 1000 req/s)[0m

[0;34mℹ️  并发数: 10[0m
[0;36m  吞吐量:[0m [0;32m970.94[0m req/s
[0;36m  平均响应时间:[0m [0;32m10.299[0m ms
[0;31m❌   吞吐量测试失败 (< 1000 req/s)[0m

[0;34mℹ️  并发数: 50[0m
[0;36m  吞吐量:[0m [0;32m1177.33[0m req/s
[0;36m  平均响应时间:[0m [0;32m42.469[0m ms
[0;32m✅   吞吐量测试通过 (> 1000 req/s)[0m

[0;34mℹ️  并发数: 100[0m
[0;36m  吞吐量:[0m [0;32m1565.86[0m req/s
[0;36m  平均响应时间:[0m [0;32m63.863[0m ms
[0;32m✅   吞吐量测试通过 (> 1000 req/s)[0m


[0;34m========================================[0m
[0;34m3. 资源使用测试[0m
[0;34m========================================[0m

[0;34mℹ️  未找到 OraSRS 进程[0m

[0;34m========================================[0m
[0;34m4. eBPF 性能测试[0m
[0;34m========================================[0m

[0;36m内核缓存大小:[0m [0;32m1509[0m 条记录
[0;36m总数据包:[0m [0;32m0[0m 个
[0;36m已阻断:[0m [0;32m0[0m 个
[0;36m已放行:[0m [0;32m0[0m 个

[0;36m平均查询延迟:[0m [0;32m0.001[0m ms
  [1;33m(目标: < 0.04ms)[0m
[0;36m峰值 TPS:[0m [0;32m0[0m req/s
  [1;33m(目标: > 10000)[0m
[0;36m内存使用:[0m [0;32m21.876243591308594[0m MB
[0;32m✅ eBPF 延迟达标[0m
[0;34mℹ️  eBPF 吞吐量待提升 (需要实际流量测试)[0m

[0;34m========================================[0m
[0;34m5. 压力测试[0m
[0;34m========================================[0m

[0;34mℹ️  运行 30 秒压力测试...[0m
[0;36m总请求数:[0m [0;32m46808[0m 个
[0;36m失败请求:[0m [0;32m0[0m 个
[0;36m平均 RPS:[0m [0;32m1560.22[0m req/s
[0;32m✅ 压力测试通过 (无失败请求)[0m

[0;34m========================================[0m
[0;34m6. Lightweight Agent Benchmark[0m
[0;34m========================================[0m

[0;34mℹ️  Starting lightweight agent...[0m
[0;32m✅ Agent started successfully (PID: 286746)[0m
[0;36mAgent Memory:[0m [0;32m23.63[0m MB
  [1;33m(目标: < 30MB)[0m
[0;32m✅ Lightweight agent memory usage is optimized[0m

[0;34m========================================[0m
[0;34m性能基准测试总结[0m
[0;34m========================================[0m

[0;32m✅ 性能基准测试完成[0m

[0;34mℹ️  报告已保存到: performance-report-20251217-071159.txt[0m

[0;36m建议:[0m
1. 在生产环境运行前进行完整的负载测试
2. 监控长期运行的资源使用情况
3. 根据实际流量调整配置参数

